<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Migration to v29.x - CKEditor 5 Documentation</title>
    <meta name="description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:card" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:site" content="@ckeditor">
    <meta property="og:title" content="Migration to v29.x - CKEditor 5 Documentation">
    <meta property="og:description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/migration/migration-to-29.html">
    <meta property="DC.language" content="en">
    <meta property="DC.publisher" content="CKSource">
    <meta property="DC.creator" content="CKEditor">
    <meta property="DC.title" content="Migration to v29.x - CKEditor 5 Documentation">
    <meta property="DC.format" content="text/html">
    <meta property="DC.type" content="Text">
    <meta property="DC.description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <link rel="canonical" href="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/migration/migration-to-29.html">
    <link rel="icon" type="image/png" href="../../../assets/img/favicons/16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="../../../assets/img/favicons/32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../assets/img/favicons/96x96.png" sizes="96x96">
    <link rel="apple-touch-icon" type="image/png" href="../../../assets/img/favicons/200x200.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
    <link rel="stylesheet" href="../../../../../assets/1.7.2/css/styles.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../../assets/styles.css" type="text/css">
    <script>
      ( function() {
      	'use strict';
      	// Set up global variables;
      	if ( !window.umebrto ) {
      		window.umberto = {};
      	}
      	window.umberto.relativeAppPath = "../../../../../assets/1.7.2/scripts";
      
      	// Add app script
      	var el = document.createElement( 'script' );
      	el.setAttribute( 'async', 'async' );
      	el.setAttribute( 'defer', 'defer' );
      	if ( typeof Symbol === 'function' && typeof Symbol() === 'symbol' ) {
      		el.src = "../../../../../assets/1.7.2/scripts/app.js";
      	} else {
      		el.src = "../../../../../assets/1.7.2/scripts/app-polyfill.js";
      	}
      	document.getElementsByTagName( 'head' )[ 0 ].appendChild( el );
      
      	// Changing documentation theme enable it via `localStorage.setItem( 'theme', 'theme-dark' )`
      	if ( localStorage.getItem( 'theme' ) === 'theme-dark' ) {
      		document.getElementsByTagName( 'html' )[ 0 ].classList.add( 'theme-dark' );
      	}
      } )();
    </script>
    <script>if ( ["ckeditor5.github.io"].indexOf( location.hostname ) !== -1 ) {
      	function pageView() {
      		ga( 'send', 'pageview', location.pathname + location.search + location.hash );
      	}
      
      	(function( i, s, o, g, r, a, m ) {
      		i[ 'GoogleAnalyticsObject' ] = r;
      		i[ r ] = i[ r ] || function() {
      				(i[ r ].q = i[ r ].q || []).push( arguments )
      			}, i[ r ].l = 1 * new Date();
      		a = s.createElement( o ),
      			m = s.getElementsByTagName( o )[ 0 ];
      		a.async = 1;
      		a.src = g;
      		m.parentNode.insertBefore( a, m )
      	})( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
      
      	ga( 'create', {"trackingId":"UA-271067-19","cookieDomain":"ckeditor5.github.io"} );
      
      	pageView();
      
      	window.addEventListener( 'hashchange', pageView );
      }
    </script>
  <meta name="generator" content="Hexo 4.2.1"></head>
  <body>
    <header class="top" data-project="ckeditor5">
      <div class="header__main">
        <div class="header__main-rwd-button"><a href="#"><span></span><span></span><span></span></a></div>
        <div class="header__main-title"><a class="header__main-title-home" href="../../../../../index.html">CKEditor Ecosystem Documentation</a></div>
        <div class="top__search">
          <input class="top__search__box" type="text" id="docsearch_input" placeholder="Search in CKEditor 5">
          <div class="top__search__button"><img src="../../../../../assets/1.7.2/img/loupe.svg" alt="Search"></div>
        </div>
      </div>
      <div class="header__sub">
        <ul class="top__menu">
          <li class="top__menu-project-logo"><a href="../../../index.html">CKEditor 5</a></li>
          <li><a class="top__menu__item--active" href="../../index.html">Builds</a></li>
          <li><a href="../../../framework/index.html">Framework</a></li>
          <li><a href="../../../examples/index.html">Examples</a></li>
          <li><a href="../../../features/index.html">Features</a></li>
          <li><a class="top__menu__api" href="../../../api/index.html">API</a></li>
          <li><a class="top__menu-github-link" href="https://github.com/ckeditor/ckeditor5" target="_blank" title="CKEditor 5 on GitHub."><svg viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li>
        </ul>
      </div>
      <div class="header__menu-rwd">
        <ul class="header__menu-rwd__projects">
          <li data-project="ckeditor5"><a href="../../../../latest/index.html">CKEditor 5</a>
            <ul class="tree header__menu-rwd__projects-pages">
              <li data-group="builds"><a href="../../index.html">Builds</a>
                <ul class="header__menu-rwd__projects-subpages">
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Guides</span></div>
                            <ul class="tree__item-nested-list">
                                  <li><a href="../overview.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span></div></a></li>
                                  <li><a href="../whats-new.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">What's new?</span></div></a></li>
                                  <li><a href="../quick-start.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Quick start</span></div></a></li>
                                  <li><a href="../faq.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">FAQ</span></div></a></li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Integration</span></div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="../integration/installation.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Installation</span></div></a></li>
                                          <li><a href="../integration/basic-api.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Basic API</span></div></a></li>
                                          <li><a href="../integration/configuration.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Configuration</span></div></a></li>
                                          <li><a href="../integration/saving-data.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Getting and saving data</span></div></a></li>
                                          <li><a href="../integration/installing-plugins.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Installing plugins</span></div></a></li>
                                          <li><a href="../integration/advanced-setup.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Advanced setup</span></div></a></li>
                                          <li><a href="../integration/csp.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Content Security Policy</span></div></a></li>
                                          <li><a href="../integration/content-styles.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Content styles</span></div></a></li>
                                          <li><a href="../integration/features-html-output-overview.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Features' HTML output</span></div></a></li>
                                          <li>
                                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Frameworks</span></div>
                                            <ul class="tree__item-nested-list">
                                                  <li><a href="../integration/frameworks/overview.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span></div></a></li>
                                                  <li><a href="../integration/frameworks/angular.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Angular component</span></div></a></li>
                                                  <li><a href="../integration/frameworks/react.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">React component</span></div></a></li>
                                                  <li><a href="../integration/frameworks/vuejs-v2.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vue.js 2.x component</span></div></a></li>
                                                  <li><a href="../integration/frameworks/vuejs-v3.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vue.js 3+ component</span></div></a></li>
                                                  <li><a href="../integration/frameworks/css.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">CSS frameworks</span></div></a></li>
                                            </ul>
                                          </li>
                                    </ul>
                                  </li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Development</span></div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="../development/custom-builds.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Custom builds</span></div></a></li>
                                          <li><a href="../development/plugins.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Plugins</span></div></a></li>
                                          <li><a href="../development/dll-builds.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">DLL builds</span></div></a></li>
                                    </ul>
                                  </li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Migration</span></div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="">
                                              <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Migration to v29.x</span></div></a></li>
                                          <li><a href="migration-to-27.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration to v27.x</span></div></a></li>
                                          <li><a href="migration-to-26.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration to v26.x</span></div></a></li>
                                          <li><a href="migration-to-25.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration to v25.x</span></div></a></li>
                                          <li><a href="migration-from-ckeditor-4.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration from CKEditor 4</span></div></a></li>
                                    </ul>
                                  </li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Support</span></div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="../support/browser-compatibility.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Browser compatibility</span></div></a></li>
                                          <li><a href="../support/license-and-legal.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">License and legal</span></div></a></li>
                                          <li><a href="../support/getting-support.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Getting support</span></div></a></li>
                                          <li><a href="../support/reporting-issues.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Reporting issues</span></div></a></li>
                                    </ul>
                                  </li>
                            </ul>
                          </li>
                </ul>
              </li>
              <li data-group="framework"><a href="../../../framework/index.html">Framework</a>
              </li>
              <li data-group="examples"><a href="../../../examples/index.html">Examples</a>
              </li>
              <li data-group="features"><a href="../../../features/index.html">Features</a>
              </li>
              <li data-group="api-reference"><a href="../../../api/index.html">API</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </header>
    <main class="main">
      <section class="main__content formatted">
        <div class="main__content-inner">
          <div class="github-contrib"><a href="https://github.com/ckeditor/ckeditor5/blob/master/docs/builds/guides/migration/migration-to-29.md" target="_blank" rel="noopener" title="Contribute to this guide"><img src="../../../../../assets/1.7.2/img/edit.svg" alt="Contribute to this guide"></a>
          </div>
          <div class="rwd-breadcrumbs"><a href="../../../../../index.html">Home</a><span class="rwd-breadcrumbs__separator">/</span><a href="../../../index.html">CKEditor 5</a><span class="rwd-breadcrumbs__separator">/</span><a href="../../index.html">Builds</a>
          </div>
          <h1 class="main__content-title"><img src="../../../../../assets/1.7.2/img/book.svg" alt="guide">Migration to CKEditor 5 v29.0.0
          </h1><nav class="secondary-navigation"><h3>Table of contents</h3><ol><li><a href="#inline-images">Inline images</a></li><li><a href="#image-caption">Image caption</a></li><li><a href="#image-styles">Image styles</a></li><li><a href="#image-toolbar">Image toolbar</a></li><li><a href="#inserting-images">Inserting images</a></li><li><a href="#image-utils">Image utils</a></li><li><a href="#easyimage-plugin">EasyImage plugin</a></li></ol></nav>
<p>This migration guide enumerates the most important changes that require your attention when upgrading to CKEditor 5 v29.0.0 due to changes introduced in the <a href="../../../api/module_image_image-Image.html"><code>Image</code></a> plugin and some other image-related features.</p>
<p>For the entire list of the changes introduced in version 29.0.0 of the CKEditor 5 see the changelog (TODO:link).</p>
<p>To see the new editor UI for the images visit the <a href="../../../features/images/images-overview.html">image feature guide</a>, especially:</p>
<ul>
<li>Images in the structured content, (TODO:link)</li>
<li>Images in the document-like content (TODO:link)</li>
</ul>
<h2 id="inline-images"><a class="headerlink" href="#inline-images">#</a> Inline images</h2>
<p>From the 29.0.0 version, the existing <a href="../../../api/module_image_image-Image.html"><code>Image</code></a> plugin loads two independent plugins - <a href="../../../api/module_image_imageinline-ImageInline.html"><code>ImageInline</code></a> and <a href="../../../api/module_image_imageblock-ImageBlock.html"><code>ImageBlock</code></a>, therefore both of them are included in all of the <a href="../overview.html#available-builds">predefined editor builds</a> by default.</p>
<ul>
<li>The <a href="../../../api/module_image_imageinline-ImageInline.html"><code>ImageInline</code></a> is a newly introduced plugin supporting an inline <code>&lt;img&gt;</code> tag nested in any <a href="../../../framework/guides/deep-dive/schema.html#defining-advanced-rules-in-checkchild-callbacks"><code>$block</code> element</a> in the editor. In the model, it is represented by an <code>imageInline</code> element.</li>
<li>The <a href="../../../api/module_image_imageblock-ImageBlock.html"><code>ImageBlock</code></a> maintains the functionality of the previous <a href="../../../api/module_image_image-Image.html"><code>Image</code></a> plugin. In the model, the previous <code>image</code> element is renamed to <code>imageBlock</code>.</li>
</ul>
<div class="info-box notice"><p><strong>Note:</strong> It is possible to load only one of these plugins, but only when <a href="../integration/advanced-setup.html#scenario-2-building-from-source">building the editor from source</a>.</p></div>
<h2 id="image-caption"><a class="headerlink" href="#image-caption">#</a> Image caption</h2>
<p>An image caption is no longer automatically showed up when selecting the image widget. Its visibility can now be toggled with a <a href="../../../api/module_image_imagecaption_toggleimagecaptioncommand-ToggleImageCaptionCommand.html"><code>ToggleImageCaptionCommand</code></a> executed by the <code>toggleImageCaption</code> button, both registered by the <a href="../../../api/module_image_imagecaption-ImageCaption.html"><code>ImageCaption</code></a> plugin. The button is added to the default image toolbar in all of the <a href="../overview.html#available-builds">predefined editor builds</a>.</p>
<div class="info-box notice"><p>To provide a valid HTML data output, an image caption is supported for the block images only. Adding a caption to an inline image results in conversion the block image.</p></div>
<h2 id="image-styles"><a class="headerlink" href="#image-styles">#</a> Image styles</h2>
<p>Since the appearance of the image in the document depends on the image type (block/inline), the <a href="../../../api/module_image_imagestyle-ImageStyle.html"><code>ImageStyle</code></a> plugin is now in charge of switching between these types. Thus, the following changes have been introduced:</p>
<ul>
<li>
<p><a href="../../../api/module_image_image-ImageConfig.html#member-styles">A new set of buttons</a> is available to manage the image type and appearance.</p>
</li>
<li>
<p>There is a possibility to group the buttons provided by the <a href="../../../api/module_image_imagestyle-ImageStyle.html"><code>ImageStyle</code></a> plugin into the dropdowns.</p>
<ul>
<li>A few <a href="../../../api/module_image_imagestyle_utils.html#constant-DEFAULT_DROPDOWN_DEFINITIONS">default drop-downs</a> are provided.</li>
<li>In the editor configuration <a href="../../../api/module_image_imagestyle_imagestyleui-ImageStyleDropdownDefinition.html">a custom drop-down</a> can be declared.</li>
</ul>
</li>
<li>
<p>The format of the <code>config.image.styles</code> has changed. The list of the styles must be wrapped with the <code>options</code> array. Read more about the <a href="../../../api/module_image_image-ImageConfig.html#member-styles"><code>image.styles</code> configuration</a>.</p>
</li>
</ul>
<pre class="highlight"><code class="js">// Old code
Editor.create( document.querySelector( &apos;#editor&apos; ), {
    ...
    image: {
        styles: [ &apos;inline&apos;, &apos;full&apos;, &apos;side&apos; ]
    }
} );

// New code
Editor.create( document.querySelector( &apos;#editor&apos; ), {
    ...
    image: {
        styles: {
            options: [ &apos;inline&apos;, &apos;full&apos;, &apos;side&apos; ]
        }
    }
} );
</code></pre>
<ul>
<li>The format of the <code>imageStyle</code> has changed. It must now provide an information about the image types supporting a particular style. Read more about the <a href="../../../api/module_image_imagestyle-ImageStyleOptionDefinition.html"><code>ImageStyleOptionDefinition</code></a>.</li>
</ul>
<pre class="highlight"><code class="js">// Old code
Editor.create( document.querySelector( &apos;#editor&apos; ), {
    ...
    image: {
        styles: [ {
            name: &apos;alignLeft&apos;,
            title: &apos;Left aligned image&apos;,
            icon: objectLeft,
            className: &apos;image-style-align-left&apos;
        } ]
    }
} );

// New code
Editor.create( document.querySelector( &apos;#editor&apos; ), {
    ...
    image: {
        styles: {
            options: [ {
                name: &apos;alignLeft&apos;,
                title: &apos;Left aligned image&apos;,
                icon: objectLeft,
                // Image types (names of the model elements) supporting this style.
                modelElements: [ &apos;imageBlock&apos;, &apos;imageInline&apos; ],
                className: &apos;image-style-align-left&apos;
            } ]
        }
    }
} );
</code></pre>
<ul>
<li>Also, several changes has been made to the <a href="../../../api/module_image_imagestyle-ImageStyle.html"><code>ImageStyle</code></a> plugin API:
<ul>
<li>In the <a href="../../../api/module_image_imagestyle_utils.html">image style utils</a> module
<ul>
<li>the <code>defaultIcons</code> are renamed to <a href="../../../api/module_image_imagestyle_utils.html#constant-DEFAULT_ICONS"><code>DEFAULT_ICONS</code></a>,</li>
<li>the <code>defaultStyles</code> are renamed to <a href="../../../api/module_image_imagestyle_utils.html#constant-DEFAULT_OPTIONS"><code>DEFAULT_OPTIONS</code></a>,</li>
<li>the <code>normalizeImageStyles</code> function is now protected and is renamed to <a href="../../../api/module_image_imagestyle_utils.html#function-normalizeStyles"><code>normalizeStyles</code></a></li>
</ul>
</li>
<li>The <code>ImageStyleCommand#defaultStyle</code> and <code>ImageStyleCommand#styles</code> are private properties now.</li>
</ul>
</li>
</ul>
<h2 id="image-toolbar"><a class="headerlink" href="#image-toolbar">#</a> Image toolbar</h2>
<p>Due to the changes mentioned above, the <a href="../../../api/module_image_image-ImageConfig.html#member-toolbar">image toolbar</a> became crucial in terms of providing the user with proper interaction with images in terms of managing the image type and caption. Thus, it is recommended to use one of the following configurations as the minimum set-up for the image toolbar:</p>
<ul>
<li>
<p>For the purposes of the structured content editing (implemented by default in the classic, balloon, balloon-block, and inline editor builds):</p>
<pre class="highlight"><code class="js">Editor.create( document.querySelector( &apos;#editor&apos; ), {
    ...
    image: {
        toolbar: [
            &apos;imageStyle:inline&apos;,
            &apos;imageStyle:full&apos;,
            &apos;imageStyle:side&apos;,
            &apos;|&apos;,
            &apos;toggleImageCaption&apos;,
            &apos;imageTextAlternative&apos;
        ]
    }
} );
</code></pre>
</li>
<li>
<p>For the purposes of the document-like editing (implemented by default in the decoupled document build).</p>
<pre class="highlight"><code class="js">Editor.create( document.querySelector( &apos;#editor&apos; ), {
    ...
    image: {
        toolbar: [
            &apos;imageCaption&apos;,
            &apos;imageStyle:inline&apos;,
            // A drop-down containing `alignLeft` and `alignRight` options
            &apos;imageStyle:wrapText&apos;,
            // A drop-down containing `alignBlockLeft`, `full` (default) and  `alignBlockRight` options
            &apos;imageStyle:breakText&apos;
        ]
    }
} );
</code></pre>
</li>
</ul>
<p>To view the above configurations, see the <a href="../../../features/images/images-overview.html">image feature guide</a>.</p>
<h2 id="inserting-images"><a class="headerlink" href="#inserting-images">#</a> Inserting images</h2>
<p>When loaded, the <a href="../../../api/module_image_imageinline-ImageInline.html"><code>ImageInline</code></a> plugin changes the default behavior of inserting/pasting/dropping images into a non-empty <code>$block</code> elements - it is now upcasted to the <code>imageInline</code> model element. The image inserted into an empty paragraph is still upcasted to a <code>imageBlock</code> model element. This behavior can be overridden in the <a href="../../../api/module_image_imageinsert-ImageInsertConfig.html"><code>ImageInsert</code> plugin configuration</a> to force an insertion block or inline images only.</p>
<p>Read more about the [logic controlling the image type while inserting/pasting/dropping](TODO: link).</p>
<h2 id="image-utils"><a class="headerlink" href="#image-utils">#</a> Image utils</h2>
<p>The image utils are now wrapped by a <a href="../../../api/module_image_imageutils-ImageUtils.html"><code>ImageUtils</code></a> plugin.</p>
<pre class="highlight"><code class="js">// Old code
import { isImage } from &apos;./utils&apos;;

const selectedElement = editor.model.document.selection.getSelectedElement();

if ( isImage( selectedElement ) ) {
    // ...
}

// New code
// ...
const imageUtils = this.editor.plugins.get( &apos;ImageUtils&apos; );
const selectedElement = editor.model.document.selection.getSelectedElement();

if ( imageUtils.isImage( selectedElement ) ) {
    // ...
}
</code></pre>
<ul>
<li>The <a href="../../../api/module_image_imageutils-ImageUtils.html#function-insertImage"><code>insertImage</code></a> function
<ul>
<li>doesn&#x2019;t require a <code>model</code> parameter any longer,</li>
<li>as a second parameter also <a href="../../../api/module_engine_model_selection-Selectable.html"><code>Selectable</code></a> can be passed not only <a href="../../../api/module_engine_model_position-Position.html"><code>Position</code></a>,</li>
<li>a new parameter <code>imageType</code> is now supported to force a type of the image to be inserted.</li>
</ul>
</li>
</ul>
<pre class="highlight"><code class="js">// Old code
import { insertImage } from &apos;./utils&apos;;

const src = &apos;path/to/image.jpg&apos;;
const model = ths.editor.model;
const selection = model.document.selection;
const position = model.createPositionAt( selection.getSelectedElement() );

insertImage( model, { src }, position );

// New code
const src = &apos;path/to/image.jpg&apos;;
const selection = this.editor.model.document.selection;
const imageUtils = this.editor.plugins.get( &apos;ImageUtils&apos; );
const imageType = &apos;imageBlock&apos;;

imageUtils.insertImage( { src }, selection, imageType );
</code></pre>
<ul>
<li>The <a href="../../../api/module_image_imageutils-ImageUtils.html#function-isImage"><code>isImage</code></a> function returns now an <code>Element</code> for both, inline and block images.</li>
<li>There are two new helpers: <a href="../../../api/module_image_imageutils-ImageUtils.html#function-isBlockImageView"><code>isBlockImageView</code></a> and <a href="../../../api/module_image_imageutils-ImageUtils.html#function-isInlineImageView"><code>isInlineImageView</code></a> functions.</li>
<li>The <code>getSelectedImageWidget</code> function is now protected and is renamed to <code>getClosestSelectedImageElement</code>.</li>
<li>The <code>getViewImgFromWidget</code> function is now protected and is renamed to <code>getViewImageFromWidget</code>.</li>
<li>The <code>isImageAllowed</code> function is now protected.</li>
<li>The <code>isImageWidget</code> function is now protected.</li>
<li>The <code>toImageWidget</code> function is now protected.</li>
</ul>
<h2 id="easyimage-plugin"><a class="headerlink" href="#easyimage-plugin">#</a> <code>EasyImage</code> plugin</h2>
<p>Please note that the <a href="../../../api/module_easy-image_easyimage-EasyImage.html"><code>EasyImage</code></a> plugin is no longer automatically importing the <a href="../../../api/module_image_image-Image.html"><code>Image</code></a> plugin as a dependency. This allows using it alone with either <a href="../../../api/module_image_imageblock-ImageBlock.html"><code>ImageBlock</code></a> or <a href="../../../api/module_image_imageinline-ImageInline.html"><code>ImageInline</code></a> without loading the other.</p>
<p>This decoupling does not have an impact on integrations based on on <a href="../overview.html#available-builds">official editor builds</a> or using <a href="https://ckeditor.com/ckeditor-5/online-builder/">the CKEditor 5 online builder</a>.</p>
<p>However, for integrations that <a href="../integration/advanced-setup.html#scenario-2-building-from-source">build the editor from source</a>, this means that in order to get Easy Image working properly, the <code>Image</code> plugin (or one of <a href="../../../api/module_image_imageblock-ImageBlock.html"><code>ImageBlock</code></a> or <a href="../../../api/module_image_imageinline-ImageInline.html"><code>ImageInline</code></a>) must be imported separately:</p>
<pre class="highlight"><code class="js">import EasyImage from &apos;@ckeditor/ckeditor5-easy-image/src/easyimage&apos;;
import Image from &apos;@ckeditor/ckeditor5-image/src/image&apos;;

ClassicEditor
    .create( document.querySelector( &apos;#editor&apos; ), {
        plugins: [ EasyImage, Image, ... ],
        toolbar: [ &apos;uploadImage&apos;, ... ],

        // ...
    } )
    .then( ... )
    .catch( ... );
</code></pre>
<p>Check out the comprehensive <a href="../../../features/images/images-installation.html">installation guide to images</a> in CKEditor 5 to learn more.</p>

        </div>
      </section>
      <div class="side-navigation">
        <div class="side-navigation__wrapper">
          <nav class="side-navigation__inner">
            <ul class="tree guide-tree">
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Guides</span></div>
                            <ul class="tree__item-nested-list">
                                    <li><a href="../overview.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span></div></a></li>
                                    <li><a href="../whats-new.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">What's new?</span></div></a></li>
                                    <li><a href="../quick-start.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Quick start</span></div></a></li>
                                    <li><a href="../faq.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">FAQ</span></div></a></li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Integration</span></div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="../integration/installation.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Installation</span></div></a></li>
                                              <li><a href="../integration/basic-api.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Basic API</span></div></a></li>
                                              <li><a href="../integration/configuration.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Configuration</span></div></a></li>
                                              <li><a href="../integration/saving-data.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Getting and saving data</span></div></a></li>
                                              <li><a href="../integration/installing-plugins.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Installing plugins</span></div></a></li>
                                              <li><a href="../integration/advanced-setup.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Advanced setup</span></div></a></li>
                                              <li><a href="../integration/csp.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Content Security Policy</span></div></a></li>
                                              <li><a href="../integration/content-styles.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Content styles</span></div></a></li>
                                              <li><a href="../integration/features-html-output-overview.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Features' HTML output</span></div></a></li>
                                              <li>
                                                <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Frameworks</span></div>
                                                <ul class="tree__item-nested-list">
                                                        <li><a href="../integration/frameworks/overview.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span></div></a></li>
                                                        <li><a href="../integration/frameworks/angular.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Angular component</span></div></a></li>
                                                        <li><a href="../integration/frameworks/react.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">React component</span></div></a></li>
                                                        <li><a href="../integration/frameworks/vuejs-v2.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vue.js 2.x component</span></div></a></li>
                                                        <li><a href="../integration/frameworks/vuejs-v3.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vue.js 3+ component</span></div></a></li>
                                                        <li><a href="../integration/frameworks/css.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">CSS frameworks</span></div></a></li>
                                                </ul>
                                              </li>
                                      </ul>
                                    </li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Development</span></div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="../development/custom-builds.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Custom builds</span></div></a></li>
                                              <li><a href="../development/plugins.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Plugins</span></div></a></li>
                                              <li><a href="../development/dll-builds.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">DLL builds</span></div></a></li>
                                      </ul>
                                    </li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Migration</span></div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="">
                                                  <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Migration to v29.x</span></div></a></li>
                                              <li><a href="migration-to-27.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration to v27.x</span></div></a></li>
                                              <li><a href="migration-to-26.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration to v26.x</span></div></a></li>
                                              <li><a href="migration-to-25.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration to v25.x</span></div></a></li>
                                              <li><a href="migration-from-ckeditor-4.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration from CKEditor 4</span></div></a></li>
                                      </ul>
                                    </li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Support</span></div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="../support/browser-compatibility.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Browser compatibility</span></div></a></li>
                                              <li><a href="../support/license-and-legal.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">License and legal</span></div></a></li>
                                              <li><a href="../support/getting-support.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Getting support</span></div></a></li>
                                              <li><a href="../support/reporting-issues.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Reporting issues</span></div></a></li>
                                      </ul>
                                    </li>
                            </ul>
                          </li>
            </ul>
          </nav>
        </div>
      </div>
    </main>
    <footer class="footer footer--bordered">
      <p>&copy; 2003-2021 <a href="http://cksource.com" target="_blank" rel="noopener">CKSource</a>. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
docsearch({
apiKey:'fc463c26455365ad403d5ec51796cd73',indexName:'ckeditor_nightly',inputSelector:'#docsearch_input',algoliaOptions:{hitsPerPage:250,attributesToRetrieve:'*',facetFilters:['tags: ckeditor5']},
transformData: function( hits ) {var sortingFn = function( a, b ) {a.custom_ranking = a.custom_ranking || 0;b.custom_ranking = b.custom_ranking || 0;if ( a.custom_ranking === b.custom_ranking ) return a.index - b.index;if ( a.custom_ranking > b.custom_ranking ) return -1;if ( a.custom_ranking < b.custom_ranking ) return 1;};var result = [];var tags = [ 'builds', 'framework', 'examples', 'features', 'api' ];var hitsGrouped = { api: [] };hitsGrouped[ 'builds' ] = hits.filter( function( h ) {return h.tags.includes( 'builds' );} ).slice( 0, 7 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn );tags.forEach( function( tag ) {if ( tag !== 'builds' ) {hitsGrouped[ tag ] = hits.filter( function( h ) {return h.tags.includes( tag );} ).slice( 0, 10 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn ).slice( 0, 3 );}} );var apiSearchHits = [];if ( window.apiSearch ) apiSearchHits = window.apiSearch();hitsGrouped.api = hitsGrouped.api.filter( function( h ) {var isDuplicated = false;for ( var i = 0; i < apiSearchHits.length; i++ ) {if ( h.url.includes( apiSearchHits[ i ].urlShort ) ) {isDuplicated = true;break;}}return !isDuplicated;} );hitsGrouped.api = ( apiSearchHits || [] ).concat( hitsGrouped.api );result = result.concat( hitsGrouped[ 'builds' ] );tags.forEach( function( tag ) {if ( tag !== 'builds' ) result = result.concat( hitsGrouped[ tag ].slice( 0, 4 ) );} );return result;}
});
</script>
  </body>
</html>